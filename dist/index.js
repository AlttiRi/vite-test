(function(e,t){"use strict";const n={props:["text","index"],emits:["delete-tag"],name:"Tag",methods:{onContextMenu(){console.log("onContextMenu");this.$emit("delete-tag",this.index)}}};const o=e.withScopeId("data-v-75158db2");e.pushScopeId("data-v-75158db2");const a={class:"tag"};e.popScopeId();const c=o(((t,n,o,c,s,r)=>(e.openBlock(),e.createBlock("span",a,[e.createVNode("span",{class:"content",href:`#`+o.text,onContextmenu:n[1]||(n[1]=e.withModifiers(((...e)=>r.onContextMenu&&r.onContextMenu(...e)),["prevent"])),contenteditable:"false"},e.toDisplayString(o.text),41,["href"])]))));n.render=c;n.__scopeId="data-v-75158db2";const s={name:"InputTagNew",props:["modelValue"],emits:["update:modelValue","submit-new-tag","backspace","backspace-ctrl"],mounted(){this.$refs.input.innerText=this.modelValue},methods:{onInput(e){const t=e.target.innerText;const n=this.$refs.input;let o=t.replaceAll(/[\s\n]+/g," ").trim();const a=o.split(" ");if(a.length>1){a.forEach((e=>{e=c(e,true);this.$emit("submit-new-tag",e)}));n.innerText="";return}function c(e,t=false){function o(){e=e.replaceAll("__","_");if(t)return;const{anchorOffset:o}=window.getSelection();n.innerText=e;let a=o-1;if("_"===e.charAt(o+1)||e.length===o)a+=1;r(a)}while(e.includes("__"))o();return e}o=c(o);this.$emit("update:modelValue",o)},onSpaceShift(){document.execCommand("insertText",false,"_");console.log("onSpaceShift")},onSubmitNewTag(){console.log("onSubmitNewTag");const e=this.$refs.input;if(e.innerText)this.$emit("submit-new-tag",e.innerText)},onBackspace(e){console.log("onBackspace");if(!e.target.innerText){e.preventDefault();this.$emit("backspace")}},onBackspaceCtrl(e){console.log("onBackspaceCtrl");if(!e.target.innerText)this.$emit("backspace-ctrl")}},watch:{async modelValue(e,t){const n=this.$refs.input;if(n.innerText!==e&&void 0!==e){n.innerText=e;r(e.length)}}}};function r(e=0,t=window.getSelection()){var n;if(!e)return;const o=new Range;const a=null!=(n=t.anchorNode.childNodes[0])?n:t.anchorNode;if(!a){console.log("!textNode");return}let c=t.anchorOffset+e;c=c<0?0:c;o.setStart(a,c);o.collapse(true);t.removeAllRanges();t.addRange(o)}const i=e.withScopeId("data-v-399a8083");e.pushScopeId("data-v-399a8083");const p={class:"tag input-tag"};e.popScopeId();const l=i(((t,n,o,a,c,s)=>(e.openBlock(),e.createBlock("span",p,[e.createVNode("span",{class:"content",ref:"input",contenteditable:"true","data-placeholder":"+",onKeydown:[n[1]||(n[1]=e.withKeys(e.withModifiers((e=>(e.stopImmediatePropagation(),s.onSpaceShift(e))),["shift","prevent"]),["space"])),n[2]||(n[2]=e.withKeys(e.withModifiers(((...e)=>s.onSubmitNewTag&&s.onSubmitNewTag(...e)),["prevent"]),["space"])),n[3]||(n[3]=e.withKeys(e.withModifiers(((...e)=>s.onSubmitNewTag&&s.onSubmitNewTag(...e)),["prevent"]),["enter"])),n[4]||(n[4]=e.withKeys(e.withModifiers((e=>(e.stopImmediatePropagation(),s.onBackspaceCtrl(e))),["ctrl"]),["backspace"])),n[5]||(n[5]=e.withKeys(((...e)=>s.onBackspace&&s.onBackspace(...e)),["backspace"]))],onInput:n[6]||(n[6]=(...e)=>s.onInput&&s.onInput(...e))},null,544)]))));s.render=l;s.__scopeId="data-v-399a8083";const d={props:["tags","initInputTagText"],name:"TagsLine",components:{Tag:n,InputTag:s},data(){return{inputTagText:this.initInputTagText||""}},methods:{onSubmitNewTag(e){this.tags.push(e);this.inputTagText=""},onBackspace(){this.inputTagText=this.tags.pop()},onBackspaceCtrl(){this.tags.pop()},onDeleteTag(e){this.tags.splice(e,1)}}};const u=e.withScopeId("data-v-40946eac");e.pushScopeId("data-v-40946eac");const g={class:"tags-line"};e.popScopeId();const m=u(((t,n,o,a,c,s)=>{const r=e.resolveComponent("Tag");const i=e.resolveComponent("InputTag");return e.openBlock(),e.createBlock("div",g,[(e.openBlock(true),e.createBlock(e.Fragment,null,e.renderList(o.tags,((t,n)=>(e.openBlock(),e.createBlock(r,{text:t,index:n,onDeleteTag:s.onDeleteTag},null,8,["text","index","onDeleteTag"])))),256)),e.createVNode(i,{onSubmitNewTag:s.onSubmitNewTag,onBackspace:s.onBackspace,onBackspaceCtrl:s.onBackspaceCtrl,modelValue:c.inputTagText,"onUpdate:modelValue":n[1]||(n[1]=e=>c.inputTagText=e)},null,8,["onSubmitNewTag","onBackspace","onBackspaceCtrl","modelValue"])])}));d.render=m;d.__scopeId="data-v-40946eac";const h={name:"Row",components:{TagsLine:d},props:{content:String,index:Number},data(){return{tags:["demo","site"]}}};const x=e.withScopeId("data-v-5a1cb462");e.pushScopeId("data-v-5a1cb462");const T={class:"row"};const w=e.createTextVNode(" â€” ");e.popScopeId();const f=x(((t,n,o,a,c,s)=>{const r=e.resolveComponent("TagsLine");return e.openBlock(),e.createBlock("div",T,[e.createVNode("i",null,e.toDisplayString(o.index),1),w,e.createVNode("b",null,e.toDisplayString(o.content),1),e.createVNode(r,{tags:c.tags},null,8,["tags"])])}));h.render=f;h.__scopeId="data-v-5a1cb462";const S=e.withScopeId("data-v-67d90b29");e.pushScopeId("data-v-67d90b29");const k={class:"text-area-component"};e.popScopeId();const v=S(((t,n,o,a,c,s)=>(e.openBlock(),e.createBlock("div",k,[e.createVNode("label",null,[e.withDirectives(e.createVNode("textarea",{placeholder:"Type a text here","onUpdate:modelValue":n[1]||(n[1]=e=>s.text=e)},null,512),[[e.vModelText,s.text]])])]))));const b={name:"TextArea",computed:{...t.mapState("textarea",{_text:e=>e.textarea}),text:{get(){return this._text},set(e){this.setText(e)}}},methods:{...t.mapMutations("textarea",["setText"])}};b.render=v;b.__scopeId="data-v-67d90b29";const B={name:"Main",data(){return{demoTags:["tag"]}},components:{Row:h,TextArea:b,TagsLine:d},computed:{...t.mapState("textarea",{textarea:e=>e.textarea}),linesComputed(){const e=this.textarea.split("\n");return e.filter((e=>e.trim()))}}};const I=e.withScopeId("data-v-15fb5ab4");e.pushScopeId("data-v-15fb5ab4");const N={class:"container"};const V=e.createVNode("hr",null,null,-1);const C={class:"textarea-wrapper"};e.popScopeId();const _=I(((t,n,o,a,c,s)=>{const r=e.resolveComponent("TagsLine");const i=e.resolveComponent("TextArea");const p=e.resolveComponent("Row");return e.openBlock(),e.createBlock("div",N,[e.createVNode(r,{tags:c.demoTags,initInputTagText:`new_tag`},null,8,["tags"]),V,e.createVNode("div",C,[e.createVNode(i)]),(e.openBlock(true),e.createBlock(e.Fragment,null,e.renderList(s.linesComputed,((t,n)=>(e.openBlock(),e.createBlock("div",null,[e.createVNode(p,{content:t,index:n},null,8,["content","index"])])))),256))])}));B.render=_;B.__scopeId="data-v-15fb5ab4";const M={components:{Main:B}};function y(t,n,o,a,c,s){const r=e.resolveComponent("Main");return e.openBlock(),e.createBlock(r)}M.render=y;const $=()=>({textarea:["*.example.com","*.example-2.com"].join("\n")});const D={setText(e,t){e.textarea=t},clearText(e){e.textarea=""}};var A={namespaced:true,state:$,mutations:D};const L=t.createStore({modules:{textarea:A},plugins:[K]});function K(e){e.subscribe((e=>{console.log(e)}))}e.createApp(M).use(L).mount("#app")})(Vue,Vuex);
//# sourceMappingURL=index.js.map
